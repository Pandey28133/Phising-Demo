var Obody=document;var From;Obody.onkeydown=disableCtrlKeyCombination;var IsPegasusPage=1;function stringBuilder(){var a=new Array();this.append=function(b){a.push(b);return this};this.toString=function(b){if(!b){b=""}return a.join(b)};this.length=function(){return a.join("").length}}function ele(a){return document.getElementById(a)}function checkWindow(){var a=location.href;if(a.indexOf("TeachingPlanUX.aspx")!=-1){try{if(window.frames[0].objPopWin&&window.frames[0].objPopWin!="undefined"){window.frames[0].objPopWin.focus();return true}else{if(window.frames[1].objPopWin&&window.frames[1].objPopWin!="undefined"){window.frames[1].objPopWin.focus();return true}else{return false}}}catch(b){return false}}else{if(a.indexOf("AssignContentUX.aspx")!=-1){try{if(window.frames[0].objPopWin){window.frames[0].objPopWin.focus();return true}else{if(window.frames[2].objPopWin){window.frames[2].objPopWin.focus();return true}else{return false}}}catch(b){return false}}else{if(a.indexOf("CoursePreviewUX.aspx")!=-1){try{if(window.frames[1].objPopWin&&window.frames[1].objPopWin!="undefined"){window.frames[1].objPopWin.focus();return true}else{if(rtUXWindow().objWindow&&rtUXWindow().objWindow!="undefined"){try{rtUXWindow().objWindow.close();return false}catch(b){return false}}else{return false}}}catch(b){return false}}else{return false}}}}function hideLegendCMMMNDView(){if(CheckAlternateView()){if(pageParent.parentWindow.$(".divDisplay").length>0){pageParent.parentWindow.$(".divDisplay").css("display","none")}}}function SetfontImg(b){if(checkWindow()==false){var e;switch(b.id){case"imgfontsmall":e=1;break;case"imgfontmedium":e=2;break;case"imgfontlarge":e=3;break}var d=null;var a=null;if(window.frames[0]){parentId=window.frames[0].CurentAssetId;a=window.frames[0]}else{parentId=window.CurentAssetId;a=window}var c=location.href;if(a.ADVANCED_MODE_FLAG){if(a.ADVANCED_MODE_FLAG=="1"){if(c.indexOf("AdMode")!=-1){asyncSetSessionValue(c)}else{asyncSetSessionValue(c+"&AdMode=1")}}}else{if(c.indexOf("AdMode")!=-1){c=c.substring(0,c.length-9);asyncSetSessionValue(c)}else{if(c.indexOf("From=AC")!=-1){asyncSetSessionValue(c.substring(0,c.indexOf("?")+1)+"&From=AC&SelectedDate="+window.frames[2].SelectedDateTime+"&FilterOpt="+window.frames[0].ContentSeleted+"&intLinkParentID="+window.frames[0].rtAssetID)}else{if(c.indexOf("From=SCC")!=-1){asyncSetSessionValue(c.substring(0,c.indexOf("?")+1)+"&from=SCC&SelectedDay="+window.frames[1].document.getElementById("hdnSelectedDay").value)}else{asyncSetSessionValue(c)}}}}if(c.indexOf("From=AC")!=-1){location.href="../../../Common/frmSetFontSettings.aspx?fontsize="+e}else{location.href="../../Common/frmSetFontSettings.aspx?fontsize="+e}}}function disableCtrlKeyCombination(d){var b=new Array("n");var a;var c;if(window.event){a=window.event.keyCode;if(window.event.ctrlKey){c=true}else{c=false}}else{a=d.which;if(d.ctrlKey){c=true}else{c=false}}if(c){for(i=0;i<b.length;i++){if(b[i].toLowerCase()==String.fromCharCode(a).toLowerCase()){return false}}}return true}getBrowserDetails();function getBrowserDetails(){this.ver=navigator.appVersion;this.agent=navigator.userAgent;this.dom=document.getElementById?1:0;this.ie4=(document.all&&!this.dom)?1:0;this.ie=this.ie4||(this.ver.indexOf("MSIE")>-1&&this.dom)?1:0;this.mac=this.agent.indexOf("Mac")>-1;this.opera5=this.agent.indexOf("Opera 5")>-1;this.ns6=(this.dom&&(parseInt(this.ver)>=5)&&(this.agent.indexOf("Netscape")>-1))?1:0;this.ns4=(document.layers&&!this.dom&&(this.agent.indexOf("Netscape")>-1))?1:0;this.ff=(this.dom&&(parseInt(this.ver)>=5)&&(this.agent.indexOf("Firefox")>-1))?1:0;this.bw=(this.ie||this.ns4||this.ns6||this.opera5||this.ff||this.dom);return this}var JS_AssetTypeEnum=new AssetType_Enum();function AssetType_Enum(){this.AssetRoot=1;this.LinkRoot=2;this.AssetFolder=4;this.LinkFolder=8;this.File=16;this.Assesment=32;this.Question=64;this.Question=64;this.WebLink=128;this.PegasusHTML=256;this.DRTModule=512;this.QuestionSet=1024;this.Discussion=2048;this.LearningObjective=4096;this.SIMStudyPlan=8192;this.WPSFile=16384;this.MyTestFolder=32768;this.MyQuestionFolder=65536;this.QuestionFolder=131072;this.Tutorial=524288;this.Ebook=1048576;this.SkillStudyPlan=2097152;this.PracticeLesson=4194304;this.Section=8388608;this.LearningModule=16777216;this.EBookPlus=33554432;this.LessonPlan=67108864;this.LCC=134217728;this.QuestionGroup=8388608;this.Amplifire=268435456}function ContextualMenuOperation(){this.Edit=1;this.Preview=2;this.Delete=3;this.Remove=4;this.ShowHide=5;this.EditLink=6;this.RenameLink=7;this.Tryout=8;this.Print=9;this.ViewGrades=10;this.ViewSubmissions=11;this.AssessmentReport1=12;this.AssessmentReport2=13;this.AssessmentReport3=14;this.Schedule=15;this.SendMessage=16;this.OpenModule=17;this.EditDiscription=18;this.CourseReport=19;this.GlobalReport=20;this.AssignUnassign=21;this.Unassign=22;this.SchedulingOptions=23;this.MarkComplete=24;this.MarkIncomplete=25;this.AssignNextItem=26;this.ViewStudentTrackers=27;this.ViewTeacherEdition=28;this.ViewStudentEdition=29;this.CreatePDF=31;this.TeacherPreview=33}var JS_UserActivityStatusEnum=new UserActivityStatusEnum();function UserActivityStatusEnum(){this.Empty=-1;this.NotStarted=0;this.SubmittedLate=1;this.InProgress=2;this.Mastered=3;this.Completed=4;this.Passed=5;this.NotPassed=6;this.ReviewRequired=7;this.AttemptAgain=8;this.Submitted=9;this.NotSubmitted=10;this.NonScorableLCC=11;this.ShowNA=12}function TreeDataType(){this.Course=0;this.Content=1;this.FrameWork=2;this.SkillStandard=3;this.SkillStandardContent=4;this.ContentType=5;this.Topic=6}var JS_ContainerType=new ContainerTypeEnum();function ContainerTypeEnum(){this.Folder=0;this.ContentType=1;this.ActivityCategory=2;this.ModuleType=3;this.Topic=4;this.SubTopic=5}function JS_ViewByType(){this.TABLE_OF_CONTENT=0;this.SKILLS=1;this.STANDARDS=2;this.INTERACTIVE_FLASH=3;this.CONTENTTYPE=4;this.TOPIC=5}var JS_AssetProxyType=new AssetProxyType_Enum();function AssetProxyType_Enum(){this.Genaral=0;this.SIM_Question=1;this.SCO_Question=2;this.MathXL_Activity=3;this.MathXL_Question=4}var JS_ISCourseSpace=new ValidateCourseSpace();function ValidateCourseSpace(){this.CourseSpace=1;this.WorkSpace=2}function UserLoginMode(){this.Normal=0;this.Admin=1;this.PSU=2;this.Backdoor=3}function PegasusUserRole(){this.None=0;this.CoursespaceAdmin=1;this.WorkspaceAdmin=2;this.Instructor=3;this.Student=4;this.PublisherAdmin=5;this.SystemAdmin=6;this.ProgramAdmin=7;this.TeachingAssistant=8}var BrowserFromType=new ContentBrowserFromType_Enum();function ContentBrowserFromType_Enum(){this.QuestionLibrary=1;this.PegasusHTML=2;this.Assesment=3;this.ContentTool=4;this.QuestionLibraryHTMLEditor=5;this.DRTModule=6;this.QuestionSet=7;this.SIMStudyPlan=8;this.HelpLinks=9;this.CourseSettings=10;this.PracticeLesson=11;this.Section=12;this.LearningModule=13;this.SkillStudyplan=14;this.FeedBack=15;this.LessonPlan=16;this.LCC=17;this.AddFromLibrary=18;this.Badging=19}function PropertiesWindow(a){if((parseInt(ES_OrganisationTypeId)==JS_ISCourseSpace.CourseSpace)||(parseInt(ES_OrganisationTypeId)==JS_ISCourseSpace.WorkSpace)){if($("#hdnChkAssignContent").val()=="1"){OpenAssignContentWindow();$("#hdnChkAssignContent").val("0")}else{GetStatusMessageForAsset(a)}}else{if(a==undefined){a="cc"}objPopWin=window.open(appPath+"/Modules/AssessmentSchedule/AssignContent.aspx?strFrom="+a+"&intAssetLinkID="+AssetLinkID+"&CCCurrentPageIndex="+paging+"&intLeftAssetID="+intParentLinkAssetId+"&intRightAssetID="+RightAsset+"&AssetTypeEnum="+gh+"&intLinkID="+INT_LINKID+"&Status="+ContentStatus+"&IsPSC="+IsPSC+"&CopyCourseID="+SharedCourseID,"NM","toolbar=no,statusbar=no,resizable=0,scrollbars=yes,addressbar=no,left="+(screen.width*10/100)+", width="+(screen.width*75/100)+", top="+(screen.height*16/100)+",height="+(screen.height*70/100))}}function OpenAssignContentWindow(){objPopWin=window.open(appPath+"/Modules/AssessmentSchedule/AssignContent.aspx?strFrom="+objFrom+"&intAssetLinkID="+AssetLinkID+"&CCCurrentPageIndex="+paging+"&intLeftAssetID="+intParentLinkAssetId+"&intRightAssetID="+RightAsset+"&AssetTypeEnum="+gh+"&intLinkID="+INT_LINKID+"&Status="+ContentStatus+"&IsPSC="+IsPSC+"&CopyCourseID="+SharedCourseID,"NM","toolbar=no,statusbar=no,resizable=0,scrollbars=yes,addressbar=no,left="+(screen.width*10/100)+", width="+(screen.width*75/100)+", top="+(screen.height*16/100)+",height="+(screen.height*70/100))}var FromType={Topic:"5",SkillStd:"SS",ContentType:"4",Studyplan:"Drt",CLpopup:"schdulepopup"};var StudyMaterials="StudyMaterials";function AssignContentCallBack(g,n,h){try{var k=n;var a=window;if(n.strFrom=="DayView"){var l="";if(IsSearchClicked()){l=$(".es_divWrapText",$("div[id$='"+intAssetLinkID+"'] .LeftNavigation_TOC_Title",a.document))}else{l=$(".dvNodeContent",$("div[id$='"+intAssetLinkID+"']",a.document))}l.attr("condensed","0");l.attr("title",$("#txtTitle",h.document).val());$Peg.UI.Condense(l,{IsTreeElement:true})}if(k.strFrom==FromType.Studyplan){window.opener.parent.parent.parent.document.getElementById("iframeIns1").src="DRTInstructorUX.aspx?intLinkParentID="+ParentAssetid+"&DRTID="+DRTAssetid+"&DTAssetID="+DTAssetId+"&ETAssetID="+ETAssetid+"&From="+FromType.Studyplan+"&Status="+Status+"&intLinkID="+0}else{if(k.strFrom==FromType.CLpopup){window.opener.parent.parent.parent.document.getElementById("ifrmRight").src="CourseContentUX.aspx?mode=10"}else{if(a.document.getElementById("ifrmRight")==null||k.strFrom=="LN"){if(k.strFrom=="LN"){var d;var f="UpdPnlRight";var c="postBack";if(CheckAlternateView()){d=window.opener;d.ReloadCalendar(c)}else{d=window;if(d.IsSeachMode()){d.parent.SetUpdatePanelStatus(d.parent.UpdpnlStatusEnum.Global);f=(d.CalendarLayout==d.Layout.Layout75?$("div[id$='UpdPnlHEDLeft']",d.document).attr("id"):$("div[id$='UpdPnlLeft']",d.document).attr("id"));if(d.GetSearchMode()){c=(d.GetSearchMode()==d.TypeofSearch.Simple?"SimpleSearchClick":"AdvancedSearchClick")}}if(IsSearchClicked()){d.ReloadCalendar(c)}else{window.fnCalendarrtUpdate(k.intAssetLinkID);if(k.IsAsyncronousRollback=="True"){window.MessageBoard.Confirm(getLocalizedString("IDS_GRADES_UPDATE_INPROGRESS"))}}}h.window.close();GetFolderstatus(k);return true}if(k.strFrom=="DayView"){window.fnCalendarrtUpdate(k.intAssetLinkID)}}}}if(k.SourceCourseId!="0"){if(k.strFrom==StudyMaterials){a.parent.MessageBoard.Confirm(getLocalizedString("9004"))}else{var e=a.$Pegasus.JSFW.getFrameContentWindow("ifrmRight",1);var b=e.location.href;var o=e.location.pathname;o+=e.BuildCCQueryString(false,b,10);rtUXWindow().$("#ifrmRight").attr("src",o)}h.window.close();return true}if(typeof(a.ViewByType)!="undefined"){var b=a.location.href;var o=a.location.pathname;var j;if(k.AssetTypeEnum==k.LinkFolder){j=30}else{j=10}if(a.IsSeachMode()){o+=a.BuildCCQueryString(true,b,j)}else{o+=a.BuildCCQueryString(false,b,j)}if(k.IsAsyncronousRollback=="True"){o+="&IsAsyncronousRollback="+k.IsAsyncronousRollback}if(a.ViewByType==a.ViewByTypeOption.Skill||a.ViewByType==a.ViewByTypeOption.Standard){a.parent.MessageBoard.Confirm(a.msgSaveProperty)}else{if(k.AssetTypeEnum!="8"){a.parent.MessageBoard.Confirm(getLocalizedString("9004"))}}rtUXWindow().$("#ifrmRight")[0].src=o}else{if(rtUXWindow().$("#ifrmRight").length=="0"){if(k.strFrom==StudyMaterials&&true){window.MessageBoard.Confirm(Message)}else{RefreshCalender(k)}}}}catch(m){}h.window.close();GetFolderstatus(k);return true}function RefreshCalender(b){try{if(b.AssetTypeEnum==b.LinkFolder){setModeToDisplayMessage(31,b.IsAsyncronousRollback)}else{setModeToDisplayMessage(10,b.IsAsyncronousRollback)}if(window.fnRightRefresh){window.fnRightRefresh()}else{window.__doPostBack("UpdPnlRight","postBack");rtUXWindow().rtUXWindow().rtUXWindow().RefreshCalender()}}catch(a){}return false}function setModeToDisplayMessage(c,a){if(window.From){var b=getLocalizedString("9004");if(a=="True"){b=b+" "+getLocalizedString("IDS_GRADES_UPDATE_INPROGRESS")}if(window.From.toLowerCase()==="cc"){if($("input[id*='hdnMessage']").length>0){$("input[id*='hdnMessage']").val(b);window.document.aspnetForm.submit()}else{window.document.aspnetForm.submit();$(rtUXWindow().MessageBoard.Confirm(b))}}else{$(rtUXWindow().MessageBoard.Confirm(b))}}else{if(rtUXWindow().From){if(rtUXWindow().From.toLowerCase()==="ac"){rtUXWindow().location.href=AppPath+"/Modules/TeachingPlan/Calendar/AssignContentUX.aspx?From=AC&mode="+c+"&RightAssetID="+intLeftAssetID+"&intLinkID="+intLinkID}}}}function closeChildWindow(){try{if(window.opener.objHighLight){if(typeof HLNotify=="undefined"||HLNotify==0){window.opener.objHighLight.popStatus=0;window.opener.objHighLight.HighLightChange()}}if(strFrom=="TSL"||strFrom=="TSLLP"||strFrom=="TSLCL"||strFrom=="TSLCC"){window.opener.UnblockBackGroundUI()}if(typeof(objWin)=="undefined"){if(!objWin.Closed){objWin.close()}}}catch(a){}}function closeCurrentWindow(){if(strFrom=="TSL"||strFrom=="TSLLP"){window.opener.ClosePopUp()}window.close();return false}var ScreenWidth=0;var ScreenHeight=0;var ScreenLeft=0;var ScreenTop=0;var index="";var ucStatesTrClientID="";function SelectStates(obj){ucStatesTrClientID="#"+$(obj).parents("TR")[0].id;if(ScreenWidth==0){ScreenWidth=$(window).width()+20;ScreenHeight=$(window).height()+35;ScreenLeft=window.screenLeft;if(ScreenLeft!=0){ScreenTop=window.screenTop}}if(obj.checked||obj.innerHTML==getLocalizedString("IDS_Selected_State")){var VcDivHeight=480;var VcDivWidth=740;var newScreenWidthSize=$(window).width();var newScreenHeightSize=$(window).height();if(($(window).height()-((VcDivHeight*30)/100))<VcDivHeight){newScreenHeightSize=VcDivHeight+((VcDivHeight*30)/100)}if(($(window).width()-((VcDivWidth*30)/100))<VcDivWidth){newScreenWidthSize=VcDivWidth+((VcDivWidth*30)/100)}if(window.opener!=undefined){self.resizeTo(newScreenWidthSize,newScreenHeightSize)}var tempTop=0;var tempLeft=0;with(rtUXWindow().document.documentElement){tempTop=Math.round((($(window).height()+scrollTop)-VcDivHeight)/2);tempLeft=Math.round((($(window).width()+scrollLeft)-VcDivWidth)/2)}if(window.opener!=undefined){var varLeft=Math.round((window.opener.screen.width-newScreenWidthSize)/2);var varTop=Math.round((window.opener.screen.height-newScreenHeightSize)/2)}if(window.opener!=undefined){rtUXWindow().moveTo(varLeft,varTop)}OpenLightBoxDiv(appPath+"/Modules/ContentTool/frmAssetStates.aspx?hdnStateIds="+$(ucStatesTrClientID+" input[id$='hdnStateIds']").attr("id"),false,VcDivHeight,VcDivWidth,tempTop,tempLeft);if(window.opener!=undefined&&($(window).width()<=newScreenWidthSize||$(window).height()<=newScreenHeightSize)){self.resizeTo(newScreenWidthSize,newScreenHeightSize);$("div iframe").parent().css("left","100")}if(BrowserDetect.browser=="Chrome"&&window.location.href.indexOf("frmAddeBookLink.aspx")>=0){var _left=(newScreenWidthSize-VcDivWidth)/2;var _top=((newScreenHeightSize-VcDivHeight)/2)-20;$("#lightboxid").parent("div").first().offset({top:_top,left:_left})}}else{if($(ucStatesTrClientID+" input[id$='hdnStateIds']").length>0){$(ucStatesTrClientID+" input[id$='hdnStateIds']")[0].value=""}$(ucStatesTrClientID+" span[id$='spnName']").removeClass("cssChangeSpanTextToLink");if(mStatesSessionKey!=""){rtUXWindow().PageMethods.StoreToSession(mStatesSessionKey,"")}}}function SelectStatesLink_OnClick(a){if($("#"+$(a).parents("TR")[0].id+" input[id$='hdnStateIds']").val()!=""){SelectStates(a)}}function resizeWindow(){if(window.opener!=undefined){self.resizeTo(ScreenWidth+20,ScreenHeight+35);rtUXWindow().moveTo(ScreenLeft,ScreenTop)}}function resizeWindowFolderLinkFilePL(){if(window.opener!=undefined){self.resizeTo(ScreenWidth+20,ScreenHeight-6);rtUXWindow().moveTo(ScreenLeft,ScreenTop)}if($.browser.mozilla){var b=Math.round(($(window).width())/2);var a=Math.round($(window).height()+60);window.parent.resizeWindow();window.parent.moveTo(b,a)}}var MathXltimerId;var MathXlchildWindow=null;var objMathXLChildWindow=null;var objMathXlparentWindiow=null;var objWaitingParentWindow=null;var objLitCurrentOpenerWindow=null;var objLitCurrentTimerOpenerWindow=null;var MgmSelectedDate=null;var MathXlAssetLinkID=null;var LTIAppPath=null;var SubmissionAttemptID=null;var TotalPollingTime=null;var SubSequentSleepInterval=null;var SubSequentSleepIntervalTimer=null;var FirstInterval=null;var LtiIdentifier=null;var Attemptid=null;var LaunchMode=null;var PageIndex=null;function MathXLchildWinStatusTimer(g,k,j,b,h,m,f,d,a,l,e,c){objLitCurrentTimerOpenerWindow=h;objMathXlparentWindiow=b;objMathXLChildWindow=j;LTIAppPath=a;MgmSelectedDate=f;Attemptid=g;LaunchMode=k;PageIndex=c;SubSequentSleepIntervalTimer=e;FirstInterval=l;MathXlAssetLinkID=d;if(isNaN(m)){m=MathXLToolLaunch.toolLaunchEntity.ToolLaunchWaitMaxTime}MathXltimerId=setTimeout("setTimer("+m+")",m)}function setTimer(b){try{MathXlchildWindow=objMathXLChildWindow;if(MathXlchildWindow!==null){if(!(MathXlchildWindow.closed)){MathXltimerId=setTimeout("setTimer("+b+")",b)}else{clearTimeout(MathXltimerId);if(LaunchMode=="Resume"||LaunchMode=="New"){GetMathXlOutComeStatus(Attemptid,objMathXlparentWindiow,objLitCurrentTimerOpenerWindow,LTIAppPath,FirstInterval,SubSequentSleepIntervalTimer,"Abrupt Closer of Activity")}else{ClearWaitingScreen()}}}}catch(a){ClearWaitingScreen()}}function GetMathXlOutComeStatus(f,h,b,d,e,g,a){var c;objWaitingParentWindow=h;SubmissionAttemptID=f;objLitCurrentTimerOpenerWindow=b;LTIAppPath=d;TotalPollingTime=e;SubSequentSleepInterval=g;LtiIdentifier=a;setTimeout("GetMathXlOutComeStatusCheckbyHandler(TotalPollingTime,LtiIdentifier)",e)}function GetMathXlOutComeStatusCheckbyHandler(a,b){$.ajax({url:LTIAppPath+"/Modules/AssessmentTool/Presentation/LtiOutComeStatus.ashx?SubmissionAttemptid="+SubmissionAttemptID+"&TotalWaitTime="+a+"&Identifier="+b,dataType:"json",fail:function(){ClearWaitingScreen()},success:Callback_OutComeOperation})}function ClearWaitingScreen(){if(objMathXlparentWindiow!=null){var a=$(objMathXlparentWindiow.document.body).find("#divMathXL");if(a.length>0){$(a).remove();refreshPage()}}}function Callback_OutComeOperation(a){if(a==1){TotalPollingTime=0;updateActivityEvent_onmathxlsubmission();ClearWaitingScreen()}else{TotalPollingTime=Number(TotalPollingTime)+Number(SubSequentSleepInterval);setTimeout("GetMathXlOutComeStatusCheckbyHandler(TotalPollingTime)",SubSequentSleepInterval)}}function MathXLParentRefreshAfterMaxTime(a){setTimeout("ClearWaitingScreen()",a)}function updateActivityEvent_onmathxlsubmission(){if(MathXlAssetLinkID!=null||typeof MathXlAssetLinkID=="undefined"){var a=$.ajax({type:"POST",url:LTIAppPath+"/Modules/AssessmentTool/ViewSubmission/ViewSubmissionWebMethods.asmx/UpdateActivityEventOnMathXLSubmission",data:"{'intAssetLinkID' :'"+MathXlAssetLinkID+"'}",contentType:"application/json; charset=utf-8",dataType:"json",async:false,fail:function(b){},success:function(b){}})}}function LtiSelectedDay(c){var a="";try{c=RemoveCharAtEnd(c,"#");if(MgmSelectedDate){a=MgmSelectedDate}c=ReplaceQuerystring(c,"SelectedDay",a);if(PageIndex!=null&&PageIndex!="0"){c=ReplaceQuerystring(c,"Page",PageIndex)}if(c.indexOf("IsAPMode")==-1){c=AddQueryString(c,"IsAPMode",1)}}catch(b){objLogger.LogArguments(objLogger.Error,"Exception Occured in selectedDay",b)}return c}function ReplaceQuerystring(d,b,e){if(d.indexOf(b)>-1){var a=d.substring(0,d.indexOf(b));var c="";if(d.indexOf("&",d.indexOf(b))>-1){c=d.substring(d.indexOf("&",d.indexOf(b)),d.length)}d=a+b+"="+e+c}else{d=AddQueryString(d,b,e)}return d}function AddQueryString(b,a,c){var e="";if(b.indexOf("#")>0){var d=b.split("#");b=d[0];e="#"+d[1]}if(b.indexOf(a)==-1){if(b.indexOf("?")>-1){b=b+"&"+a+"="+c}else{b=b+"?"+a+"="+c}}return b+e}function RemoveCharAtEnd(b,a){strLastPart=b.substring(b.length-1,b.length);if(strLastPart==a){b=b.substring(0,b.length-1)}return b}function refreshPage(){if(objLitCurrentTimerOpenerWindow!==null){var e=objLitCurrentTimerOpenerWindow.location.href;e=LtiSelectedDay(e);var c=new Date();var d=c.getDate()+c.getTime()+c.getMilliseconds()+c.getMinutes();e=ReplaceQuerystring(e,"dummy",d);var a=true;if(e.indexOf("ViewSubmission.aspx")!==-1){a=false}else{if(e.indexOf("frmCreateLCC.aspx")!==-1){a=false}else{if(e.indexOf("frmMathXLAssessment.aspx")!==-1){a=false}else{if(e.indexOf("frmAddLessonPlan.aspx")!==-1){a=false}else{if(e.indexOf("CourseContentUX.aspx")!==-1){a=false}else{if(e.indexOf("frmTSLStudentMaterials.aspx")!==-1){a=false}else{if(e.indexOf("frmCustomContent.aspx")!==-1){a=false}else{if(e.indexOf("frmContentLibrary.aspx")!==-1){a=false}else{if(e.indexOf("CalendarDefaultGlobalUX.aspx")!==-1){a=false}else{if(e.indexOf("CalendarDefaultUX.aspx")!==-1){a=false}else{if(e.indexOf("CustomUI.aspx")!==-1){a=false}else{if(e.indexOf("frmStudentExplore.aspx")!==-1){a=false}else{if(e.indexOf("DRTDefaultUX.aspx")!==-1){if(LaunchMode=="Resume"||LaunchMode=="New"){a=true}else{a=false}}}}}}}}}}}}}}if(a){if(e.lastIndexOf("#")==e.length-1){var b=e.substring(e.length-1,e.length)}if(b=="#"){e=e.substring(0,e.length-1)}if(objLitCurrentTimerOpenerWindow.location.href==e){objLitCurrentTimerOpenerWindow.location.reload()}else{objLitCurrentTimerOpenerWindow.location.href=e}}}}function LtiInitPageAlive(b){try{if(objMathXlparentWindiow){if(!objMathXlparentWindiow.document.body.getAttribute("IgnoreSession")){objMathXlparentWindiow.document.createAttribute("IgnoreSession");objMathXlparentWindiow.document.body.setAttribute("IgnoreSession","true")}}intTimerID=window.setInterval("LtiKeepPageAlive()",b)}catch(a){objLogger.LogArguments(objLogger.Error,"initPageAlive",a)}}function LtiKeepPageAlive(){try{MathXlchildWindow=objMathXLChildWindow;if(MathXlchildWindow!==null){if(!(MathXlchildWindow.closed)){var c=new Date();var b=new Image(1,1);b.src=appPath+"/Modules/AssessmentTool/Presentation/Active.aspx?dummy="+c.getDay()+c.getTime()}else{clearTimeout(intTimerID)}}}catch(a){objLogger.LogArguments(objLogger.Error,"KeepPageAlive",a)}}function OpenLogoutPopUp(d,b,a,c,f,e){$("<div id='divlogoutcontainer'><div id='divLogoutOuter'></div><div id='divLogoutInner'></div></div>").appendTo("body");$("#divLogoutOuter").css({position:"fixed",opacity:"0.3",width:"100%",height:"100%",left:"0px",top:"0px","background-color":"#000000",filter:"alpha(opacity=15)",border:"0","z-index":"100000"});$("#divlogoutcontainer").css({position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",display:"block","z-index":"100000",overflow:"hidden"});$("#divLogoutInner").css({position:"absolute","z-index":"100000",width:c+"px",height:a+"px",left:($(window).width()-c)/2+"px",top:($(window).height()-a)/2+"px",filter:"alpha(opacity=100)",border:"0","background-color":"#ffffff"});$("#divLogoutInner").html("<iframe src ='"+d+"' width='100%' height='100%' frameborder='0' scrolling='no' ></iframe>")}function CheckTecherOnly(a){if($("input[id*='ChkTecherOnly']").attr("checked")==true&&a.attributes.ContentMode.value>0){$("input[id*='ChkTecherOnly']")[0].checked=false;window.open(appPath+"/Common/ShowMessage.aspx?fn=SelctTeachrOnly&alert=2&ResID=IDS_TOC_CONF_CHECKSELCT","","toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*30/100)+", width="+(screen.width*37/100)+",top="+(screen.height*40/100)+",height="+(screen.height*16/100)+", scrollbars=no");return false}if(location.href.toLowerCase().indexOf("drtdefaultux")!=-1){GetTeacherOnly()}}function SelctTeachrOnly(){$("input[id*='ChkTecherOnly']").attr("checked","true")}function openConfirmationWindow(){if(lnkDeleteCourse.disabled==true){return false}SubnavigationBar.MessageBoard.Clear();var a=window.document.getElementById("hdnBulkDelete");if((window.document.getElementById("grdCourse$_ctrl1")!=undefined&&window.document.getElementById("grdCourse$_ctrl1")!=null)){if(ele("grdCourse$_ctrl1").value>0){if(ele("grdCourse$hdnSelectedElements").value==""){objWin=window.open("../../../Common/ShowMessage.aspx?alert=1&ResID=5105","SingleDelete","toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*30/100)+", width="+(screen.width*37/100)+",top="+(screen.height*40/100)+",height="+(screen.height*15/100)+", scrollbars=no");return false}else{objWin=window.open("../../../Common/ShowMessage.aspx?alert=2&ResID=5106&ctrlName=lnkDeleteCourse","BulkDelete","toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*30/100)+", width="+(screen.width*37/100)+",top="+(screen.height*40/100)+",height="+(screen.height*15/100)+", scrollbars=no");return false}}}else{window.open("../../../Common/ShowMessage.aspx?alert=1&ResID=IDS_GEN_NOCOURSES","","toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*30/100)+", width="+(screen.width*37/100)+",top="+(screen.height*40/100)+",height="+(screen.height*15/100)+", scrollbars=no");return false}}function disableDeletebtn(){if(typeof(lnkDeleteUser)!="undefined"){lnkDeleteCourse.disabled=true;$("#lnkDeleteCourse")[0].style.color="#AEAEAE"}}function customStoreQuestion(b,a){var c=null;if(a!="grdOrganization"){c=$("#lnkDeleteCourse")}else{c=$("#lnkDeleteOrganisation")}if(document.getElementById(a).childNodes[0].childNodes[0].childNodes.length>1){if(document.getElementById(a+"$hdnSelectedElements").value.length==0){$($(c).selector)[0].disabled=true;$("#imgDelete")[0].src="../../../images/delete_off.gif";$($(c).selector)[0].style.color="AEAEAE";$($(c).selector)[0].style.cursor="default"}else{$($(c).selector)[0].disabled=false;$("#imgDelete")[0].src="../../../images/icn_delete1.gif";$($(c).selector)[0].style.color="white";$($(c).selector)[0].style.cursor="hand"}}}function toPostBack(){window.opener.parent.location=AppPath+"/Modules/MyPegasus/MyPegasusUX.aspx?"}function GetStatusMessageForAsset(b){From=b;if(From==undefined){From="cc"}var c='{"AssetLinkID":"'+AssetLinkID+'","CourseId":"'+SharedCourseID+'"}';var a=$.ajax({type:"POST",url:AppPath+"/Modules/TeachingPlan/TeachingPlan.asmx/Checkfolderstatus",contentType:"application/json; charset=utf-8",dataType:"json",data:c,async:false,success:GetStatusMessage,error:checkError})}var Message;function GetStatusMessage(a){try{if(a.d!=0){var c=a.d;switch(c){case 1:Message="IDS_Teacherandstudentcontent";break;case 2:Message="IDS_Teacherandstudentcontent";break;case 3:Message="AC10";break;case 4:Message="AC01";break;case 5:Message="IDS_HiddenandTeachercontent";break;default:objPopWin=window.open(appPath+"/Modules/AssessmentSchedule/AssignContent.aspx?strFrom="+From+"&intAssetLinkID="+AssetLinkID+"&CCCurrentPageIndex="+paging+"&intLeftAssetID="+intParentLinkAssetId+"&intRightAssetID="+RightAsset+"&AssetTypeEnum="+gh+"&intLinkID="+INT_LINKID+"&Status="+ContentStatus+"&IsPSC="+IsPSC+"&CopyCourseID="+SharedCourseID,"NM","toolbar=no,statusbar=no,resizable=0,scrollbars=yes,addressbar=no,left="+(screen.width*10/100)+", width="+(screen.width*75/100)+", top="+(screen.height*16/100)+",height="+(screen.height*70/100))}if(c!=6){callAjax();return false}}}catch(b){}}function callAjax(){var b='{"resid":"'+Message+'"}';var a=$.ajax({type:"POST",url:appPath+"/Modules/TeachingPlan/TeachingPlan.asmx/AssignCheckPersonalization",contentType:"application/json; charset=utf-8",dataType:"json",data:b,async:false,success:SuccessGetAssignStatusMessage,error:checkError})}function SuccessGetAssignStatusMessage(a){objFrom="cc";From="cc";if(a.d!=0||a.d==""){var b=a.d;if(b==Message){objPopWin=window.open(appPath+"/Modules/AssessmentSchedule/AssignContent.aspx?strFrom="+objFrom+"&intAssetLinkID="+AssetLinkID+"&CCCurrentPageIndex="+paging+"&intLeftAssetID="+intParentLinkAssetId+"&intRightAssetID="+RightAsset+"&AssetTypeEnum="+gh+"&intLinkID="+INT_LINKID+"&Status="+ContentStatus+"&IsPSC="+IsPSC+"&CopyCourseID="+SharedCourseID,"NM","toolbar=no,statusbar=no,resizable=0,scrollbars=yes,addressbar=no,left="+(screen.width*10/100)+", width="+(screen.width*75/100)+", top="+(screen.height*16/100)+",height="+(screen.height*70/100))}else{objPopWin=window.open(appPath+"/Common/ShowMessage.aspx?alert=2&fn=PropertiesWindow&from="+From+"&ResID="+Message+"&intLinkID="+AssetLinkID+"&intParentLinkAssetId="+intParentLinkAssetId+"&intRightAssetID="+RightAsset+"&intAssetTypeEnum="+gh+"&Status="+ContentStatus+"&IsPSC="+IsPSC+"&SharedCourseID="+SharedCourseID+"&StringAppPath="+AppPath,"assign","toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*30/100)+", width="+(screen.width*37/100)+", top="+(screen.height*40/100)+",height="+(screen.height*19/100)+", scrollbars=no")}}}function AssignCheckPersonalization(){$("#hdnChkAssignContent").val("1");if(objPopWin.$("#chkWarning").attr("checked")){AssignDontShowAgain=1;var c=objPopWin.res1ID;var b='{"resId":"'+c+'"}';var a=$.ajax({type:"POST",url:appPath+"/Modules/TeachingPlan/TeachingPlan.asmx/AssignInsertPersonalization",contentType:"application/json; charset=utf-8",dataType:"json",data:b,async:false,success:AssignOnCheckPersonalization,error:checkError})}else{AssignDontShowAgain=0}}function AssignOnCheckPersonalization(a){if(a.Value==1){AssignDontShowAgain=1}}function checkError(c,b,a){return false}function ResetVSViewByDropDownCSS(){if(window.navigator.userAgent.indexOf("MSIE")>-1){if(document.parentWindow&&document.parentWindow.opener){document.parentWindow.opener.$("select.S_dropdown_1").css("display","block")}}}var GridTypeID={ContentLibrary:"1",CourseContent:"2",SkillStandard:"3"};function GetGAsset(b,a){if(a==GridTypeID.ContentLibrary){return GetGAssetByGridID(b,"grdContentLibrary")}else{if(a==GridTypeID.CourseContent){return GetGAssetByGridID(b,"grdCourseContent")}else{if(a==GridTypeID.SkillStandard){return GetGAssetByGridID(b,"grdSkillStandardAlignedAssets")}else{return ele(b).getAttribute("IsGA")}}}}function GetGAssetByGridID(b,a){return window.$Pegasus.JSFW.getFrameContentWindow("ifrmRight",0).$("#"+a+"").find("#"+b+"").attr("IsGA")}function GetGradableAssetCount(c,b,e){var d=0;var f=c;if(f!=""){var a=f.split(",");for(index=0;index<a.length;index++){var h=b+ +a[index];var g=GetGAsset(h,e);if(g=="1"){d++}}}return d}var globalNotification;function openNotification(e){if(e=="True"){var b="362px";var c="660px";var f=AppPath+"/Modules/TeacherSharedLibrary/CustomizeNotification.aspx";var a="toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*20/100)+", width="+c+", top="+(screen.height*25/100)+",height="+b+", scrollbars=no";var d=window.open(f,"Notification",a);globalNotification=$(d);$(d).focus()}else{return false}}function IsWindowAccessible(c){try{if(c){var a=c.document.title;return true}else{return false}}catch(b){return false}}function asyncSetSessionValue(a){response=$.ajax({type:"POST",url:"/Pegasus/Services/MenuServices/MenuService.asmx/SetSessionvalue",data:'{"strUrl": "'+a+'"}',async:true,contentType:"application/json; charset=utf-8",dataType:"json"})}var TSLviewFrom={List:"0",Calendar:"1"};var AccessContent={Teacher:"1",Student:"2",All:"3"};var AssignContent={AssetType:"1",ActivityCategory:"2",Topic:"3",SubTopic:"4",SkillStandardFramework:"5",SkillStandard:"6",AssetLinks:"7",ModuleType:"8"};function IsScoQtnAvilable(a,c){if(a==""){a=0}var b=$.ajax({type:"POST",url:AppPath+"/Modules/TeachingPlan/TeachingPlan.asmx/IsSCOQuestionAvailableInActivity",async:false,data:"{CourseID :"+a+", ActivityID: "+c+"}",contentType:"application/json; charset=utf-8",dataType:"json"});if(b.status==200){return $.evalJSON(b.responseText).d}else{return false}}function GetFolderstatus(e){var h=e.isMutliassign;if(h=="True"){var j=(screen.height*39/100);var g=(screen.width*48/100);var c=e.intAssetLinkID;var b=e.sectionsWithoutassetlink;var a=AppPath+"/Modules/AssessmentSchedule/AssignPropertiesAlertPopUp.aspx?SelectedsectionIds="+b+"&intAssetLinkID="+c;var f="toolbar=no,statusbar=no,resizable=0,addressbar=no,left="+(screen.width*20/100)+", width="+g+", top="+(screen.height*25/100)+",height="+j+", scrollbars=no";var d=window.open(a,"Pegasus",f);$(d).focus();return false}}function rtUXWindow(){if(typeof pageParent=="undefined"){pageParent=new pageUI.Parent()}if(pageParent.parentWindow.location.href.indexOf(".aspx")<0){return window}else{return pageParent.parentWindow}}function SetEmbdViewUI(){if(CheckAlternateView()){$(".bodymaster").css({"min-width":"99%"});$("#tdouterside").css({width:"48%"});$("#tdfrmRight").css({width:"52%"});$("#container").css({overflow:"hidden",width:"99%"});$("#banner").css({width:"99%"})}}var matched,Browser;function BrowserDetectInit(){var a=function(c){c=c.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];return{Browser:b[1]||"",version:b[2]||"0"}};matched=a(navigator.userAgent);Browser={msie:false,mozilla:false,safari:false,chrome:false};if(matched.Browser){Browser[matched.Browser]=true;Browser.version=matched.version;Browser.name=matched.Browser}if(Browser.chrome){Browser.chrome=true}else{if(Browser.webkit){Browser.safari=true;Browser.name="safari"}}}function Error_Handler(b){var c="Invalid calling object";var a="Unable to get value of the property 'toLowerCase': object is null or undefined";if(b==c||b==a){return true}}var objSim5ChildWindow=null;function Sim5childWinStatusTimer(b,a){objSim5ChildWindow=b;objLitCurrentTimerOpenerWindow=b.opener;Sim5timerId=setTimeout("setSIM5Timer("+a+")",a)}function setSIM5Timer(c){var a;try{Sim5childWindow=objSim5ChildWindow;if(Sim5childWindow!==null){if(!(Sim5childWindow.closed)){a=setTimeout("setSIM5Timer("+c+")",c)}else{clearTimeout(a);refreshPage()}}}catch(b){clearTimeout(a);objLogger.LogArguments(objLogger.Error,"Exception Occured in setSIM5Timer",ex)}}function IsTouchDevice(){var a=navigator.userAgent.toLowerCase();return(a.search("android")>-1||a.search("ipad")>-1)}var ClientDevice={IsAndroid:function(){return this.userAgent().search("android")>-1},IsIPad:function(){return this.userAgent().search("ipad")>-1},IsWinSarface:function(){return this.userAgent().search("touch")>-1},IsPuffin:function(){return this.userAgent().search("puffin")>-1},IsTouchDevice:function(){return this.IsAndroid()||this.IsIPad()||this.IsWinSarface()||this.IsPuffin()},IsTouchDeviceBrowsers:function(){return this.IsWinSarface()||this.IsPuffin()},userAgent:function(){return navigator.userAgent.toLowerCase()}};var eventType={keyup:"keyup",paste:"paste",drop:"drop",keypress:"keypress"};function CheckNumbersForAndroid(a){if(a.type==eventType.keyup){a.target.value=a.target.value.replace(/[^0-9]/g,"")}}function CheckHexValueForAndroid(a){if(a.type==eventType.keyup){a.target.value=a.target.value.replace(/[^0-9a-f\#]/gi,"")}}function CheckEnteredDateValueForAndroid(a){if(a.type==eventType.keyup){a.target.value=a.target.value.replace(/[^0-9\-\/]/g,"")}}function CheckEnteredValueOnlyNumbersAndAphabetsForAndroid(a){if(a.type==eventType.keyup){a.target.value=a.target.value.replace(/[^0-9a-zA-Z]/gi,"")}}function CheckNumbers(c){var a=c.which;var d=0;var b=8;if(c.type=="keypress"){if(!(a==b||a==d)){if(!$.isNumeric(String.fromCharCode(a))){return false}}}else{if(c.type=="paste"){if(window.clipboardData){var e=window.clipboardData.getData("Text");if(!$.isNumeric(e)){return false}}else{return false}}else{if(c.type=="drop"){return false}}}}$(document).ready(function(){if(ClientDevice.IsTouchDevice()){$("body").attr("TouchDeviceEnabled","1")}});function OverideGridCmenuMouseEvents(){if(ClientDevice.IsTouchDevice()){window.fnonmouseoverCmenu=function(a){};window.fnonmouseoutCmenu=function(a){};window.hideContextualMenu=function(a){}}}var Errortype={Debug:0,Info:2,Error:4};function LogException(c,a){var b={loggertype:c,log:a};jQuery.ajax({url:AppPath+"/Common/CommonService.asmx/Logger",type:"POST",data:JSON.stringify(b),dataType:"json",contentType:"application/json",success:function(e){var d=$.parseJSON(e.d);if(d=="false"){console.log("Problem in logging, please contact administrator")}},error:function(d){console.log("Problem in logging, please contact administrator")}})}function encodeComponent(a){return encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22")}function decodeComponent(a){return decodeURIComponent(a.replace(/\+/g," "))}var getCloseButtonHTML=function(){var a=getLocalizedString("IDS_GEN_CLOSE");return"<span class='messageBoardCloseLink' onclick='MessageBoard.Clear(true);' title="+a+">X</span>"};